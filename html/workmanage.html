<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css">
	<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
	<script src="http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>
	<script src="http://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<script src="https://cdn.bootcss.com/react/15.6.2/react.min.js"></script>
	<script src="https://cdn.bootcss.com/react/15.6.1/react-dom.min.js"></script>
	<script src="https://cdn.bootcss.com/babel-standalone/6.26.0/babel.min.js"></script>
	<script src="admin/work.js" type="text/babel"></script>


	<title>星之海志愿者公会</title>

</head>

<body>
	<div id="container" class="container">
		<div class="row container form">
			<input type="text" name="workName" id="text" />
			<button id="workquery" class="btn btn-info btn-lg text-right">作品查询</button>
		</div>
		<br/> <br/> <br/>
		<div class="row container" id="findresult" style="height: 500px;"></div>
	</div>
	<script type="text/babel">
		$(function () {
			let page = 1;
			let ajaxOpt = {
				type: "post",
				url: "work/ajax",
				contentType: "application/json;charset=utf-8",
				dataType: "json",
				data: JSON.stringify({ workName: "", page })
			};
			$.ajax(ajaxOpt).done(handleData).fail(function(data){
				console.log(data);
			});
			function handleData(data) {
				if (data.errInfo) {
					$(".table tbody").empty();
					$(".table").append(data.errInfo);
					return;
				}
				ReactDOM.render(
					<WorkTable works={data.result} nowPage={data.nowPage} totalPage={data.totalPage} />,
					document.getElementById("findresult"));
				$("#text").val(data.workName);
			}
		});
	</script>
</body>

</html>