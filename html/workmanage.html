<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css">
	<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
	<script src="http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>
	<script src="http://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<script src="https://cdn.bootcss.com/react/15.6.2/react.min.js"></script>
	<script src="https://cdn.bootcss.com/react/15.6.1/react-dom.min.js"></script>
	<script src="https://cdn.bootcss.com/babel-standalone/6.26.0/babel.min.js"></script>
	<script src="admin/work.js" type="text/babel"></script>


	<title>星之海志愿者公会</title>

</head>

<body>
	<div id="container" class="container">
		<div class="row container form">
			<input type="text" name="workName" id="text" />
			<button id="workquery" class="btn btn-info btn-lg text-right">作品查询</button>
		</div>
		<br/> <br/> <br/>
		<div class="row container" id="findresult" style="height: 500px;"></div>
		<div id="addwork" hidden>
			<form method="post" enctype="multipart/form-data" class="form" action="/work/add">
				作品名称:<input type="text" name="workName" /><br/> 作品库存:
				<input type="number" name="workStock" /> <br/> 作品pdf文件路径:
				<input type="text" name="workPdfpath" /><br/> 作品封面图片:
				<input type="file" accept="image/*" name="coverFile" /><br/> 作品概要:
				<input type="text" name="workSummary" /><br/> 作品图片:
				<div id="imageFilesDiv">
					<input type="file" accept="image/*" name="imageFiles" /><br/>
				</div>
				<button id="addImageFile">增加图片</button><br/>
				<input type="submit" class="btn btn-info btn-lg" value="确认添加" />
			</form>
		</div>
	</div>
	<script type="text/babel">
		$(function () {
			let page = 1;
			let ajaxOpt = {
				type: "post",
				url: "work/ajax",
				contentType: "application/json;charset=utf-8",
				dataType: "json",
				data: '{"workName":"' + $("#text").val() + '","page":"' + page + '"}',
				success: handleData,
			};
			$.ajax(ajaxOpt);
			//添加菜单展开
			$("#addfun").click(function () {
				$("#findresult").remove();
				$("#addwork").show();
			});
			$("#addImageFile").on("click", function () {
				let str = `<input type="file" accept="image/*" name="imageFiles" /><br/>`;
				$("#imageFilesDiv").append(str);
				return false;
			});
		});
	</script>

</body>

</html>